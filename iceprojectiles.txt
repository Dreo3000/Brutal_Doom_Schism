
ACTOR FreezeDotDamage1
{
  Radius 6
  Height 6
  Speed 10
  Damage (5)
  DamageType "Freeze"
  Projectile
  +NODAMAGETHRUST
  +BLOODLESSIMPACT
  +PAINLESS
  States
  {
  Spawn:
    BUBL B 2
  Death:
    BUBL B 4
    Stop
  }
}

ACTOR FreezerTrailSparksWhite
{ 
    RenderStyle Add
    Scale 0.008
    Alpha 0.70
    +NOGRAVITY
    +CLIENTSIDEONLY
    States
    {
    Spawn:
	YA66 B 0 NoDelay A_JumpIf(ScaleX <= 0, "NULL")
	YA66 B 0 A_SetScale(ScaleX-0.00075)
    YA66 B 3 bright A_ChangeVelocity (frandom(-0.8, 0.8), frandom(-0.8, 0.8), frandom(-0.8, 0.8), 0)
    YA66 B 1 bright A_FadeOut(0.02)
    Loop
    }
}

ACTOR FreezerTrailSparksSpeed
{ 
    RenderStyle Add
    Scale 0.5
    Alpha 0.70
	Speed 12
	+DOOMBOUNCE 
    +NOGRAVITY
    +CLIENTSIDEONLY
	BounceType Grenade
	+DONTHURTSPECIES
	+THRUSPECIES
	+MTHRUSPECIES
	+RIPPER
	//+FRIENDLY
Species "Marines"	
    States
    {
    Spawn:
	SNOW A 0 NoDelay A_JumpIf(ScaleX <= 0, "NULL")
	SNOW A 0 A_SetScale(ScaleX-0.05)
	TNT1 A 3
    SNOW A 3 bright A_ChangeVelocity (frandom(-0.8, 0.8), frandom(-0.8, 0.8), frandom(-0.8, 0.8), 0)
    SNOW A 1 bright A_FadeOut(0.02)
    Loop
    }
}


ACTOR FreezeCloud3
{
+BLOODLESSIMPACT
//+FORCERADIUSDMG
+DONTBLAST
+FOILINVUL
+NODAMAGETHRUST
+DOOMBOUNCE 
+PAINLESS
-MISSILE
+DONTHURTSPECIES
+THRUSPECIES
+MTHRUSPECIES
+RIPPER
//+FRIENDLY
Species "Marines"
BounceType Grenade
damagetype "Freeze" 
damage 0
gravity 0.005
Translation "0:255=%[0.0,0.0,0.0]:[0.5,0.8,1.0]"
Alpha 0.40
Height 16
Projectile
Radius 1
RenderStyle Shaded
StencilColor "A0 FF FF"
Scale 0.5
Speed 2

SeeSound "none"
DeathSound "none"
AttackSound "none"

	States
	{
	Spawn:
	WPXS A 0 
	WPXS A 0 A_Jump(230,3,7,11,15,19,23,27)
	WPXS AB 2 A_FadeOut(0.03)
	//TNT1 A 0 A_Explode(1,32,0,0,16)
	WPXS CD 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXS EF 2 A_FadeOut(0.03)
	//TNT1 A 0 A_Explode(1,32,0,0,16)
	WPXS GH 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXS IJ 2 A_FadeOut(0.03)
	//TNT1 A 0 A_Explode(1,32,0,0,16)
	WPXS KL 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXS MN 2 A_FadeOut(0.03)
	//TNT1 A 0 A_Explode(1,32,0,0,16)
	WPXS OP 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXS QR 2 A_FadeOut(0.03) 
	TNT1 A 0 A_SetScale (0.8)
	WPXS ST 2 A_FadeOut(0.03)
	WPXS UV 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXS WX 2 A_FadeOut(0.03)
	WPXS YZ 2 A_FadeOut(0.03)
	TNT1 A 0 A_Explode(8,64,0,0,16)
	WPXZ ABC 3 A_FadeOut(0.03)
	TNT1 A 0 
	Stop
	}

}
ACTOR FreezeCloud4 : FreezeCloud3
{
Speed 20
Alpha 0.50
Scale 1.5
States
{
Spawn:
WPXS A 0 
TNT1 A 2
WPXS A 0 A_Jump(128,3,7,11)
WPXS AB 2 A_FadeOut(0.02)
//TNT1 A 0 A_Explode(1,32,0,0,16)
TNT1 A 0 A_SetScale (1.8)
WPXS CD 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (2.0)
TNT1 A 0 A_Explode(4,64,0,0,16)
WPXS EF 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (2.2)
//TNT1 A 0 A_Explode(1,32,0,0,16)
WPXS GH 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (2.5)
TNT1 A 0 A_Explode(4,64,0,0,16)
WPXS IJ 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (2.8)
//TNT1 A 0 A_Explode(1,32,0,0,16)
WPXS KL 2 A_FadeOut(0.02)
TNT1 A 0 A_Explode(4,64,0,0,16)
TNT1 A 0 A_SetScale (3.5)
WPXS MN 2 A_FadeOut(0.02)
//TNT1 A 0 A_Explode(1,32,0,0,16)
WPXS OP 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (3.8)
TNT1 A 0 A_Explode(4,64,0,0,16)
WPXS QR 2 A_FadeOut(0.02) 
TNT1 A 0 A_SetScale (4.2)
WPXS ST 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (4.6)
WPXS UV 2 A_FadeOut(0.02)
TNT1 A 0 A_Explode(4,64,0,0,16)
WPXS WX 2 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (4.8)
WPXS YZ 2 A_FadeOut(0.02)
TNT1 A 0 A_Explode(4,64,0,0,16)
WPXZ ABC 3 A_FadeOut(0.02)
TNT1 A 0 A_SetScale (5.2)
TNT1 A 0 A_SpawnItemEx("IceStalarmoce")
Stop
}
}

ACTOR CloudWhirl
{
  RenderStyle "Add"
  Scale 0.5
  species "Marines"
  +DONTHURTSPECIES
  	+THRUSPECIES
	+MTHRUSPECIES
  +NOINTERACTION
  +FRIENDLY
  +MISSILE
  Projectile
  
  var int user_angle;
  var int user_xoffset;
  var int user_yoffset;
  var int user_zoffset;

  States
  {
  Spawn:
    TNT1 A 0 NoDelay A_SetUserVar("user_xoffset", 32)
  SetVars :
    TNT1 A 0 A_SetUserVar("user_yoffset", 0)
    TNT1 A 0 A_SetUserVar("user_zoffset",42)
    TNT1 A 0 A_SetUserVar("user_angle", 0)
  AnimInit:
    TNT1 A 1 A_Warp(AAPTR_MASTER, user_xoffset, user_yoffset, user_zoffset, user_angle,
                    WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
  AnimLoop:
    WPXS T 1 Bright A_Warp(AAPTR_MASTER, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle - 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
    TNT1 A 0 A_SpawnItemEx ("FreezeCloud3",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	WPXS U 1 Bright A_Warp(AAPTR_MASTER, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle - 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
    TNT1 A 0 A_SpawnItemEx ("FreezeCloud3",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNI1 A 0  
	Loop
  Destroy:
    WPXS A 1 Bright A_Warp(AAPTR_MASTER, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle - 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_FadeOut(0.02)
    Loop
  }
}


ACTOR IceWarperA
{
  RenderStyle "Add"
  Scale 0.5
  species "Marines"
  Projectile
  +MISSILE
  +DONTHURTSPECIES
	+THRUSPECIES
	+MTHRUSPECIES
  +NOINTERACTION
  +FRIENDLY
    
 var int user_angle;
  var int user_xoffset;
  var int user_yoffset;
  var int user_zoffset;

  States
  {
  Spawn:
    TNT1 A 0 NoDelay A_SetUserVar("user_xoffset", 32)
  SetVars:
    TNT1 A 0 A_SetUserVar("user_yoffset", 0)
    TNT1 A 0 A_SetUserVar("user_zoffset", 32)
    TNT1 A 0 A_SetUserVar("user_angle", 0)
  AnimInit:
    TNT1 A 1 A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                    WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
  AnimLoop:
    POBL A 1 Bright A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle + 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
    TNT1 A 0 A_SpawnItemEx ("FreezeCloud3",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Loop
  Destroy:
    POBL A 1 Bright A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle + 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_FadeOut(0.02)
    Loop
  }
}

ACTOR IceWarperC
{
  RenderStyle "Add"
  Scale 0.5
  species "Marines"
  +DONTHURTSPECIES
  	+THRUSPECIES
	+MTHRUSPECIES
  +NOINTERACTION
  +FRIENDLY
  +MISSILE
  Projectile
  
  var int user_angle;
  var int user_xoffset;
  var int user_yoffset;
  var int user_zoffset;

  States
  {
  Spawn:
    TNT1 A 0 NoDelay A_SetUserVar("user_xoffset", 32)
  SetVars :
    TNT1 A 0 A_SetUserVar("user_yoffset", 0)
    TNT1 A 0 A_SetUserVar("user_zoffset",42)
    TNT1 A 0 A_SetUserVar("user_angle", 0)
  AnimInit:
    TNT1 A 1 A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                    WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
  AnimLoop:
    POBL A 1 Bright A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle - 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
    TNT1 A 0 A_SpawnItemEx ("FreezeCloud3",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNI1 A 0  
	Loop
  Destroy:
    POBL A 1 Bright A_Warp(AAPTR_PLAYER1, user_xoffset, user_yoffset, user_zoffset, user_angle,
                           WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_ABSOLUTEANGLE)
    TNT1 A 0 A_SetUserVar("user_angle", user_angle - 8)
    TNT1 A 0 A_SpawnItemEx("IceWarperTrail", 0, 0, 0, 0, 0, 0, 0,
                           SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    TNT1 A 0 A_FadeOut(0.02)
    Loop
  }
}


ACTOR IceWarperB : IceWarperA
{
  States
  {
  Spawn:
    TNT1 A 0 NoDelay A_SetUserVar("user_xoffset", -32)
	Goto SetVars
  }
}


ACTOR IceWarperD : IceWarperC
{
  States
  {
  Spawn:
    TNT1 A 0 NoDelay A_SetUserVar("user_xoffset", -32)
  Goto SetVars
  }
}

ACTOR IceWarperTrail
{
  RenderStyle "Add"
  Scale 0.3
  +NOINTERACTION
  States
  {
  Spawn:
    TNT1 A 1
    POBL B 1 Bright A_FadeOut(0.25)
    Wait
  }
}


ACTOR IceWarp : CustomInventory
{
  States
  {
  Pickup:
    TNT1 A 0 A_SpawnItemEx("IceWarperA", 0, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
    TNT1 A 0 A_SpawnItemEx("IceWarperB", 0, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
    TNT1 A 0 A_SpawnItemEx("IceWarperC", 0, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
    TNT1 A 0 A_SpawnItemEx("IceWarperD", 0, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
    TNT1 A 0 A_GiveInventory("FreezeImmunity", 1)
	stop
  }
}

ACTOR FreezeImmunity : PowerupGiver
{
  Powerup.Type FreezeImmunity
  Powerup.Duration -60
//  Powerup.Colormap 0.0, 0.0, 0.0, 0.5, 0.0, 0.25
//  Powerup.Color Pink, 0.05
  +INVENTORY.AUTOACTIVATE
  -ADDITIVETIME
}

actor PowerFreezeImmunity : PowerProtection
{
DamageFactor "Freeze", 0
DamageFactor "Ice", 0
}


ACTOR BigIcicle
{
	Radius 10
	Height 8
	Speed 10
	Damage (random(90,120))
	Projectile
	DamageType "Freeze"
	Scale 0.75
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	DeathSound "iceimpa"
	//MissileHeight 8
	Decal "IceScorch"
	Species "Marines"
	+THRUSPECIES
	+MTHRUSPECIES
	+RIPPER
	+EXTREMEDEATH
	States
	{
	Spawn:
		BREA A 3 Bright A_SpawnItemEx("FreezeCloud", 0, 0, 2) //A_SpawnItemEx("FreezeCloudSpawner", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_PlaySound("icespik", CHAN_7)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("Icetracer", 0, 0, random (0, 360), 2, random (0, 360))
	Spawnloop:
		BREA A 3 Bright A_SpawnItemEx("FreezeCloud", 0, 0, 2) //A_SpawnItemEx("FreezeCloudSpawner", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("Icetracer", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//BXPL A 0 Bright A_StopSound(CHAN_7)
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL AAAAAAAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparks", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJK 1 BRIGHT A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL LLM 1 Bright A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}


ACTOR BigIcicle2 : BigIcicle
{
Speed 40
Scale 0.6
Damage (random(80,100))
}
Actor SnowParticle
{
	Radius 2
	Height 2
	Damage 3
	+PAINLESS
	DamageType Freeze
	RenderStyle Translucent
	Alpha 0
	Scale 0.6
	Projectile
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetScale(frandom(0.3, 0.6))
		SNOW AAAAAAA 2 A_FadeIn(0.1)
		SNOW A 3
		loop
		Death:
		SNOW A 20 A_FadeOut(0.05)
		Stop
	}
}

Actor SnowParticle2 : SnowParticle
{
	Speed 5
	Damage 2
}

Actor SnowParticle3 : SnowParticle
{
	Damage 1
}

////The Cloud Stuff////
Actor SnowStart
{
	Radius 2
	Height 2
	Speed 1
	RenderStyle Translucent
	Alpha 0.0
	Scale 0.6
	Projectile
	+SKYEXPLODE
	States
	{
	Spawn:
		SNOW A 0 NoDelay A_ChangeVelocity(0, 0, 10, CVF_REPLACE)
		SNOW A 1 A_CheckCeiling("Death")
		Wait
		Death:
		SNOW A 1
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("SnowSpawner")
		Stop
	}
}

Actor SnowSpawner
{
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOGRAVITY
	+NOSECTOR
	+NOINTERACTION
	+NOCLIP
	-SOLID
	+SPAWNCEILING
	States
	{
	Spawn:
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx ("Snowcloud", Random(-400, 400), Random(-400, 400), -30, random(-1,1), random(-1,1), 0, 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 3 A_SpawnItemEx ("SnowParticle", Random(-400, 400), Random(-400, 400), -60, frandom(-1.0, 1.0), frandom(-1.0, 1.0), frandom(-1.0, -3.0), 0, SXF_TRANSFERPOINTERS, 0)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx ("Snowcloud", Random(-400, 400), Random(-400, 400), -30, random(-1,1), random(-1,1), 0, 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 3 A_SpawnItemEx ("SnowParticle", Random(-400, 400), Random(-400, 400), -60, frandom(-1.0, 1.0), frandom(-1.0, 1.0), frandom(-1.0, -3.0), 0, SXF_TRANSFERPOINTERS, 0)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx ("Snowcloud", Random(-400, 400), Random(-400, 400), -30, random(-1,1), random(-1,1), 0, 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 3 A_SpawnItemEx ("SnowParticle", Random(-400, 400), Random(-400, 400), -60, frandom(-1.0, 1.0), frandom(-1.0, 1.0), frandom(-1.0, -3.0), 0, SXF_TRANSFERPOINTERS, 0)
		Stop
		}
}

Actor Snowcloud
{
 Radius 0
 Height 0
 RenderStyle Translucent
 Alpha 0.0 
 Scale 2.5
 Speed 1
 +NoGravity
 +NoBlockmap
 +NoInteraction
 -Solid
 States
   {
   Spawn:
      SNCL ABCDEABCDE 7 A_FadeIn(0.01)  //fades from 0% to 100%
      SNCL ABCDEABCDEABCDEABCDEABCDEABCDEABCDEABCDEABCDEABCDEABCDEABCDE 7
      SNCL ABCDEABCDE 7 A_FadeOut(0.01)  //fades from 100% to 0%
      Stop
   }
}

ACTOR BlizzTarget
{
  Scale 1.3
  Radius 16
  Height 32
  //+FLATSPRITE
  Gravity 0
  States
  {
	Spawn:
		BLZT A 159 Bright
	Death:
		BLZT A 1 Bright A_FadeOut(0.1)
		loop
  }
}

ACTOR BlizzardTimer : Inventory
{
	inventory.maxamount 53
	+INVENTORY.UNDROPPABLE
}

ACTOR Blizzard
{
	+MISSILE
	-NOGRAVITY
	+NOBLOCKMAP
	+ACTIVATEIMPACT
	+RIPPER
	Speed 50
	Gravity 3.5
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 2
		Loop
	
	Death:	
	XDeath:
		FLMG A 0
		FLMG A 0 A_Explode (20, 50)
		TNT1 A 0 A_PlaySound("coldchr", 5)
		BXPL AAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL A 0 Bright A_SpawnItemEx("SnowStart")
		//BXPL A 0 Bright A_SpawnItemEx("CloudWhirl")
		BXPL AAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 30
		//TNT1 A 0 A_SpawnItemEX ("BlizzTarget")
		
	BlizzardTime:
		TNT1 A 0 A_JumpIfInventory("BlizzardTimer", 30, "TimesUp")
		TNT1 A 0 A_SpawnItemEX ("IceSpikeb", random(-130,130), random(-130,130), (ceilingz -10) - floorz, random(-2, 2), random(-2, 2),random(-50,-20))
		TNT1 A 0 A_SpawnItemEX ("CryoSmoke3", random(-130,130), random(-130,130))
		TNT1 A 0 A_Jump(random(128,256),3)
		TNT1 A 4
		TNT1 A 0 A_SpawnItemEX ("IceSpikeb", random(-130,130), random(-130,130), (ceilingz -10) - floorz, random(-2, 2), random(-2, 2),random(-90,-30))
		TNT1 A 8
		TNT1 A 0 A_SpawnItemEX ("IceSpikeb", random(-130,130), random(-130,130), (ceilingz -10) - floorz, random(-2, 2), random(-2, 2),random(-70,-30))
		TNT1 A 2
		TNT1 A 0 A_Jump(random(128,256),2)
		TNT1 A 0 A_SpawnItemEX ("IceSpikeb", random(-130,130), random(-130,130), (ceilingz -10) - floorz, random(-2, 2), random(-2, 2),random(-50,-20))
		TNT1 A 12
		TNT1 A 0 A_GiveInventory("BlizzardTimer")
		loop
		
	TimesUp:
		TNT1 A 0 A_StopSound(5)
		Stop
		}
}


ACTOR FreezerBall : FastProjectile
{
	Radius 4
	Height 8
	Speed 50
	Damage 0
	Projectile
	DamageType "Freeze"
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	+NOEXTREMEDEATH
	+NODAMAGETHRUST
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	+BOUNCEONFLOORS
	+BOUNCEONWALLS
	+BOUNCEONCEILINGS
	BounceType Grenade
	BounceFactor 1
	WallBounceFactor 1
	BounceCount 2
	DeathSound "weapons/cryobowhit"
	//MissileHeight 8
	Decal "IceScorch"
	States
	{
	Spawn:
		FRPJ ABC 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_StopSound(CHAN_BODY)
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL A 0 Bright A_Explode(25*random(3,4),180, 0)  
		BXPL A 0 Bright A_Explode(random(20,25), 315, 0) 
		BXPL AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL ABCD 1 Bright
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		EFGH EFGH 1 Bright
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJKLLM 1 Bright A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

ACTOR SmallFreezerBall : FreezerBall
{
	Scale 0.5

	States
	{
	Spawn:
		FRPJ ABC 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
		FRPJ ABC 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
		FRPJ ABC 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
		FRPJ ABC 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
	Goto Death
	
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_StopSound(CHAN_BODY)
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		//BXPL A 0 Bright A_Explode(5*random(2,3),10, 0)   
		BXPL AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL ABCD 1 Bright
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		EFGH EFGH 1 Bright
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJKLLM 1 Bright A_FadeOut(0.1)
	Stop
	
	}
}


ACTOR CryoSmoke
{
    Radius 2
    Height 2
    +NOINTERACTION
    +FORCEXYBILLBOARD
    RenderStyle Shaded
    StencilColor "A0 FF FF"
    Alpha 0.6
    Scale 0.85
    States
    {
    Spawn:
		SMKO A 0
        SMK2 A 2 A_FadeOut (0.03)
        Wait
    }
}

ACTOR BigCryoSmoke : CryoSmoke
{
Scale 1.2
}

Actor CryoSmoke2 : CryoSmoke { StencilColor "DD DD DD" Scale 0.7 Alpha 0.5 VSpeed 2.5
	States {
	Spawn:
		TNT1 A 0
		SMK2 A 6 A_FadeOut(0.03)
		Wait
	}
}

Actor CryoSmoke3 : CryoSmoke { StencilColor "AA FF FF" Scale 0.7 Alpha 0.4 VSpeed 2.25
	States {
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Weapons/FreezerRecharge")
		SMK2 A 6 A_FadeOut(0.03)
		Wait
	}
}

Actor MiniCryoSmoke1 : CryoSmoke { StencilColor "AA FF FF" Scale 0.7 Alpha 0.4 VSpeed 2.25
	Scale 0.25
	States {
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Weapons/FreezerRecharge")
		SMK2 A 6 A_FadeOut(0.03)
		Wait
	}
}

Actor IceTracer
{
  Height 0
  Radius 0
  Mass 0
  +Missile
  +NoBlockMap
 // -NoGravity
  +LowGravity
  +DontSplash
  +DoomBounce
  +FORCEXYBILLBOARD
  BounceFactor 0.2
  Gravity 0.1
  RenderStyle Add
  Scale 0.5
  //Speed 2
  Speed 0
  -DOOMBOUNCE
  Alpha 0.5
  States
  {
  Spawn:
  Death:
    SHEX AABBCCDDEE 1 Bright A_FadeOut(0.04)
    Stop
  }
}

ACTOR CryoShot : FastProjectile
{
	Radius 4
	Height 8
	Speed 60
	Damage (random(50,75))
	Damagetype "Freeze"
	Projectile
	RenderStyle Add
	Alpha 0.9
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+NoExtremeDeath
	DeathSound "weapons/cryobowhit"
	MissileType "CryoTrail"
	MissileHeight 8
	Decal "IceScorch"
	States
	{
	Spawn:
		BSHT A 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(3,-3), 0, random(3,-3), 0, 0, 0, 0, 128, 0) 
		BSHT A 1 Bright A_SpawnItem("PlasmaFlare",0,0)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_StopSound(CHAN_BODY)
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL A 0 Bright A_Explode(7, 8, 0) 
		BXPL A 0 Bright A_Explode(14, 16, 0)
		BXPL AAA 0 Bright A_SpawnItemEx("MiniCryoSmoke1", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), 0, random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL A 0 Bright A_SpawnItemEx("MiniCryoSmoke1", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL ABCDEFGH 1 Bright
		BXPL IJKLLM 1 Bright A_FadeOut(0.1)
		Stop
	}
}

ACTOR CryoShotBot : CryoShot
{
	Damage 12
}

ACTOR CryoTrail
{
	+NOINTERACTION
	Radius 4
	Height 8
	Renderstyle Add
	Alpha 0.5
	States
	{
	Spawn:
		BSHT AABBCDEFG 1 Bright
		Stop
	}
}


ACTOR FreezerTrailSparksSmall
{ 
    RenderStyle Add
    Scale 0.008
    Alpha 0.95
    +NOINTERACTION
    +NOGRAVITY
    +CLIENTSIDEONLY
    States
    {
    Spawn:
	YA36 B 0 NoDelay A_JumpIf(ScaleX <= 0, "NULL")
	YA36 B 0 A_SetScale(ScaleX-0.00075)
    YA36 B 3 bright A_ChangeVelocity (frandom(-0.8, 0.8), frandom(-0.8, 0.8), frandom(-0.8, 0.8), 0)
    YA36 B 1 bright A_FadeOut(0.05)
    Loop
    }
}


ACTOR FreezerTrailSparksShort
{ 
    RenderStyle Add
    Scale 0.004
    Alpha 0.3
    +NOINTERACTION
    +NOGRAVITY
    +CLIENTSIDEONLY
    States
    {
    Spawn:
	YA36 B 0 NoDelay A_JumpIf(ScaleX <= 0, "NULL")
	YA36 B 0 A_SetScale(ScaleX-0.00075)
    YA36 B 3 bright A_ChangeVelocity (frandom(-0.8, 0.8), frandom(-0.8, 0.8), frandom(-0.8, 0.8), 0)
    YA36 B 1 bright A_FadeOut(0.1)
    Loop
    }
}
Actor IceOrb
{
Radius 13
Height 8
Speed 8
Fastspeed 8
Damage 50
Projectile
RenderStyle Add
Alpha 0.7
+FORCEXYBILLBOARD
+NODAMAGETHRUST
+RIPPER
+NOBOSSRIP
+Friendly
-THRUGHOST
Damagetype Freeze
Scale 0.5
DeathSound "iceimpa"
Decal "IceScorch"
States
{
Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItem("CryoSmoke2")
	TNT1 A 0 A_playsound("coldcst")
Fly:
	ICOR AA 1 Bright 
	TNT1 A 0 A_Explode(20,90,0)
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), 4, 0, 0, 0, 0, 128, 0) 
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)

	ICOR BB 1 Bright 
	TNT1 A 0 A_Explode(20,90,0)
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), 4, 0, 0, 0, 0, 128, 0) 
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_SpawnItemEx("BigIcicle",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	
	ICOR CC 1 Bright 
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_Explode(20,90,0)
	TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), 4, 0, 0, 0, 0, 128, 0) 
    TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)

	ICOR DD 1 Bright 
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_Explode(20,90,0)
	TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), 4, 0, 0, 0, 0, 128, 0) 

	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	ICOR EE 1 Bright 
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_Explode(20,90,0)
	TNT1 A 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), 4, 0, 0, 0, 0, 128, 0) 
    TNT1 A 0 A_SpawnItemEx("BigIcicle",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	TNT1 A 0 A_SpawnItemEx("IceSpike",0,0,0,random(30,50),0,0,random(-180,180),SXF_TRANSFERPOINTERS,128)
	loop
	
Death:
	ICOR FF 1 Bright
	TNT1 A 0 A_SpawnItem("FreezenadeExplosion",0,0,0)
	TNT1 A 0 A_SetScale(1.5)
		
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AABBCCDD 1 Bright A_Explode(25,250,0) 
		TNT1 A 0 A_SetScale(2.0,1.5)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL EFGH 2 Bright A_FadeOut(0.1)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJKLLM 2 Bright A_FadeOut(0.1)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 12
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)

		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)


	
	Stop
}
}

ACTOR IceSpike : FastProjectile
{
	Radius 6
	Height 8
	Speed 45
	Damage (random(25,50))
	Projectile
	DamageType "Freeze"
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	DeathSound "iceimpa"
	//MissileHeight 8
	Decal "IceSmall"

		Species "Marines"
	+THRUSPECIES
	+MTHRUSPECIES
	States
	{
	Spawn:
		ICPK A 3 Bright
		TNT1 A 0 A_PlaySound("icespik", CHAN_7)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		//TNT1 A 0 A_CustomMissile ("Icetracer", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJK 1 BRIGHT A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL LLM 1 Bright A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

ACTOR IceSpikeb : FastProjectile
{
	Radius 4
	Height 8
	Speed 15
	Fastspeed 20
	Damage (random(25,50))
	Projectile
	DamageType "Freeze"
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	Scale 0.8
	DeathSound "iceimpa"
	//MissileHeight 8
	Decal "IceScorch"
	+ICEDAMAGE
	
	States
	{
	Spawn:
		ICBL AAA 1 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_PlaySound("icespik", CHAN_7)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		//TNT1 A 0 A_CustomMissile ("Icetracer", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL A 0 A_explode(90, 90)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL IJKLLM 1 Bright A_FadeOut(0.1)
		Stop
	}
}

ACTOR IceSpear : IceSpike
{
	+RIPPER
	Radius 20
	Scale 0.7
	Radius 6
	Height 8
	Speed 45
	Damage (random(25,50))
	Projectile
	DamageType "Freeze"
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	DeathSound "iceimpa"
	//MissileHeight 8
	Decal "IceSmall"

    Species "Marines"
	+THRUSPECIES
	+MTHRUSPECIES
	States
	{
	Spawn:
		BREA A 3 Bright A_SpawnItemEx("FreezeCloud", 0, 0, 2) //A_SpawnItemEx("FreezeCloudSpawner", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 0 A_PlaySound("icespik", CHAN_7)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		//TNT1 A 0 A_CustomMissile ("Icetracer", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//TNT1 A 0 A_Jump(96,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL IJK 1 BRIGHT A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL LLM 1 Bright A_FadeOut(0.1)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}



Actor BlizzardProjectile : IceSpear
{
Damage 0
+NOGRAVITY
+THRUACTORS
Speed 50
Damagetype "Freeze"
scale 0.1

States
	{
	
	Spawn:
		TNT1 A 0 
		TNT1 AAA 2
		
	
	Death:	
	XDeath:
		FLMG A 0
		FLMG A 0 A_Explode (20, 50)
		TNT1 A 0 A_SpawnItem("Blizzard")
		BXPL IJKLLM 1 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		//BXPL AAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		//BXPL AAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		//BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		//BXPL AAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		Stop
	}
}

ACTOR SmallIceSpike : IceSpike
{
	Damage (random(15,20))
	Radius 3
	Height 5
	Scale 0.7
	Projectile
	DamageType "Freeze"
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0,1,1]"
	Alpha 0.95
	DeathSound "iceimpa"
	//MissileHeight 8
	Decal "IceSmall"

		Species "Marines"
	+THRUSPECIES
	+MTHRUSPECIES
	States
	{
	Spawn:
		ICPK A 3 Bright
		TNT1 A 0 A_PlaySound("icespik", CHAN_7)
		TNT1 A 0 A_CustomMissile("BlueFlareSpawn",0,0,0,0)
		TNT1 A 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
		Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
		TNT1 A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		TNT1 A 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 A 1 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

ACTOR XSmallIceSpike : SmallIceSpike
{
	Damage (random(15,20))
	Radius 3
	Height 5
	Scale 0.5
}
ACTOR Icebuckshot 
  {
  Projectile
  +RANDOMIZE
  +FORCEXYBILLBOARD
  -NOGRAVITY
  damage (20+8*random(1, 4))
  gravity 0.3
  radius 4
  height 5
  speed 35
  alpha 0.8
  scale 0.2
  Decal "IceSmall"
  DeathSound "iceimpa"
  RenderStyle Add
  DamageType Freeze
  states
	{
	Spawn:
		ICBK ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0)  
		loop
	Death:
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		BXPL A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		BXPL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("IceShard0",0,0,0,random(18,24),random(-18,18),random(-18,18),random(-45,45))
		
		BXPL A 0 Bright A_Explode(25*random(2,3),100, 0)
		BXPL AAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AAAAA 0 Bright A_ChangeFlag("NODAMAGETHRUST", 0)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		TNT1 AAAAAAA 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,0,random(18,24),random(-18,18),random(-18,18),random(-45,45), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL ABCDEFG 1 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64) 
		BXPL AAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAA 0 A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL M 1 Bright A_FadeOut(0.1)
		Stop
	}
}

ACTOR IceShard0
  {
  Projectile
  +RANDOMIZE
  +FORCEXYBILLBOARD
  +BOUNCEONFLOORS
  +BOUNCEONCEILINGS
  -USEBOUNCESTATE
  -NOGRAVITY
  BounceType Grenade
  RenderStyle Add
  bouncefactor 0.75
  BounceSound "ricochet/hit"
  wallbouncefactor 0.75
  damage (15+5*random(0, 2))
  gravity 0.3
  radius 2
  height 2
  speed 48
  alpha 0.9
  scale 1.0
  Decal "IceSmall"
  DamageType Freeze //Freeze
  states
	{
	Spawn:
		ICH3 A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		ICH3 ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		ICH3 ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 1 A_CustomMissile("IceShResidue",-5,0,0,CMF_AIMDIRECTION)
	Death:
	
		TNT1 A 0 A_Stop
		TNT1 A 0 
		//ICPR IJKLM 2 //BRIGHT
		Stop
	/*Bounce:
		TNT1 A 0 A_CustomMissile("IceShard3",0,0,0,CMF_AIMDIRECTION)
		TNT1 A 0 A_Stop
		ICH3 IJKLM 2 //BRIGHT
		Stop*/
	
	XDeath:
		TNT1 AA 0 BRIGHT A_SpawnItemEx("MiniCryoSmoke1", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		TNT1 AAA 0 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 AAA 0 A_SpawnItemEx("MiniCryoSmoke1", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		Stop
	}
}

ACTOR IceShard3: IceShard0
{
  -USEBOUNCESTATE
States 
	{
		Spawn:
		ICH3 A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		ICH3 ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		ICH3 ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 1 A_CustomMissile("IceShResidue",-5,0,0,CMF_AIMDIRECTION)
		Death:
		TNT1 A 0 A_Stop
		TNT1 A 0 
		//ICPR IJKLM 2 //BRIGHT
		Stop
	}
}

ACTOR IceShard1 : IceShard0
{Damagetype Shotgun
 speed 43
 wallbouncefactor 0.80
 bouncefactor 0.78}

ACTOR IceShardSmall : IceShard0
{
	damage (10+1*random(0, 6))
	gravity 0.15
	radius 2
	height 2
	speed 80
	alpha 0.6
	scale 0.8
	wallbouncefactor 0.80
	bouncefactor 0.78
	states
	{
	Spawn:
		ICH3 A 0 Bright A_ChangeFlag("ICEDAMAGE", 1)
		ICH3 ABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		ICH3 ABCDABCD 2 BRIGHT A_SpawnItemEx("FreezerTrailSparksShort", random(5,-5), random(5,-5), random(5,-5), 0, 0, 0, 0, 128, 0) 
		TNT1 A 1 A_CustomMissile("IceShResidueSmall",-5,0,0,CMF_AIMDIRECTION)
		goto super::death
	}
}

ACTOR IceShResidue 
{
  +FORCEXYBILLBOARD
  +BOUNCEONFLOORS
  +BOUNCEONCEILINGS
  +THRUACTORS
  BounceType Grenade
  bouncefactor 0.5
  wallbouncefactor 0.5
  BounceSound "ricochet/hit"
  RenderStyle Add
  radius 2
  gravity 0.3
  height 2
  speed 20
  alpha 0.7
  scale 0.8
  states
	{
	Spawn:
		TNT1 AAAA 0 A_Jump(256, "Type1", "Type2", "Type3", "Type4")
	Type1:
		ICH3 A 20
		Goto Death
	Type2:
		ICH3 B 22
		Goto Death
	Type3:
		ICH3 C 15
		Goto Death
	Type4:
		ICH3 D 17
		Goto Death
	Death:
		ICPR IJKLM 2
	XDeath:
		ICPR IJKLM 2
	Stop
	}
}

actor FlakShake
{
  height 8
  radius 4
  +NOBLOCKMAP
  +NOGRAVITY
  +NOSECTOR
  +NOCLIP
  +CLIENTSIDEONLY
  states
  {
  Spawn:
  TNT1 A 0
  TNT1 A 0 Radius_Quake (8, 6, 0, 1, 0)
  TNT1 A 10
    Stop
  }
}



Actor IceWall : IceSpear
{
Damage 0
+NOGRAVITY
+THRUACTORS
Speed 50
Damagetype "Freeze"
scale 0.1

States
	{
	
	Spawn:
		TNT1 A 0 
		TNT1 AAA 2
		
	
	Death:	
	XDeath:
		FLMG A 0
		FLMG A 0 A_Explode (20, 50)
		TNT1 A 0
		BXPL AAA 0 Bright A_SpawnItemEx("BigCryoSmoke", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
		BXPL AAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAAAA 0 Bright A_SpawnItemEx("FreezerTrailSparksSmall", random(5,-5), random(5,-5), random(5,-5), random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
		BXPL AAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_CLIENTSIDE|SXF_NOCHECKPOSITION,64)
	
	TNT1 A 4 A_SpawnItemEX ("IceStalagmite", 10, 15)
		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite2", 15, 0)
		TNT1 A 4 A_SpawnItemEX ("IceStalagmite2",10, -15)
		
		TNT1 A 0 A_SpawnItemEX ("SmallIceStalagmite2", 7, -30)
		TNT1 A 0 A_SpawnItemEX ("SmallIceStalagmite2", 7, 30)
		
		TNT1 A 4 A_SpawnItemEX ("IceStalagmite2", 2, 50)
		TNT1 A 0 A_SpawnItemEX ("IceStalagmite3", 2, -50)
		
		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite1", -5, 75)
		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite2", -5, -75)
		
		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite", -10, 90)
		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite", -10, -90)
		
		TNT1 A 0 A_SpawnItemEX ("IceStalagmite4", -15, -100)
		TNT1 A 4 A_SpawnItemEX ("IceStalagmite3", -15, 100)

		TNT1 A 4 A_SpawnItemEX ("SmallIceStalagmite", -20, 120)
		TNT1 A 0 A_SpawnItemEX ("SmallIceStalagmite2", -20, -120)
		Stop
		
		
	}
}
/*
ACTOR GroundStalagmites
{
  Mass 99999
  Health 300
  Radius 24
  Height 128
  +SOLID
  +SHOOTABLE
  +NOBLOOD
  +DONTDRAIN
  States
  {
  Spawn:
  	ICEX AAABBCCCDDEF 5 A_PlaySound("ICEBRK1")
  Stay:
	ICEX F -1
    Stop
   Death:
	TNT1 A 0 A_NoBlocking
	TNT1 A 0 A_PlaySound ("DSBOTTLE")
	TNT1 AAAAAAA 0 A_CustomMissile ("XIceChunk1", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAA 0 A_CustomMissile ("XIceChunk2", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAAAA 0 A_CustomMissile ("XIceChunk3", 48, 0, random (0, 360), 2, random (40, 120))
	ICES G 300
	ICEX GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG 1 A_FadeOut(0.01)
	Stop
  }
}
*/
ACTOR GroundStalagmites
{
	-SOLID
	+FLOORHUGGER
	+FORCEYBILLBOARD
	+SHOOTABLE
	Health 300
	DamageFactor "freeze", 3.0
	Gravity 500.0
	Mass 10000000000
	Radius 1
	Height 1
	Scale 1.0
	alpha 0.8
	States
	{
	Spawn:
		TNT1 A 0 
		ICEX A 1 A_SetScale(frandom(0.3, 0.6),frandom(0.3, 0.5))
		ICEX ABCDEF 6 
		ICEX F 100 
		ICEX EEDDCCBBAA 1 A_FadeOut(0.02)
		Stop
	 Death.freeze:
	 TNT1 A 0 A_Jump(256,"Death.freeze1","Death.freeze2","Death.freeze3")
	 Death.freeze1:
     TNT1 A 1 A_SpawnItemEX ("SmallIceStalagmite1", 10, 15)
	 Stop
	 Death.freeze2:
     TNT1 A 1 A_SpawnItemEX ("SmallIceStalagmite", 10, 15)
	 Stop
	 Death.freeze3:
     TNT1 A 1 A_SpawnItemEX ("SmallIceStalagmite2", 10, 15)
	 Stop
	}
}


ACTOR CeilingStalagmites
{
	-SOLID
	+NOGRAVITY
	+CeilingHugger
	+FORCEYBILLBOARD 
	Radius 1
	Height 1
	alpha 0.8
	States
	{
	Spawn:
		TNT1 A 0 
		ICEY A 1 A_SetScale(frandom(0.3, 0.6),frandom(0.3, 0.5))
		ICEY ABCDEF 6 
		ICEY F 100 
		ICEY EEDDCCBBAA 1 A_FadeOut(0.02)
		Stop
	}
}
ACTOR DetectFloorIce
{
 game Doom
 scale 5.0
 speed 0
 health 1
 radius 8
 height 2
 Gravity 0.9
 damage 0
 Renderstyle Add
 Alpha 0.9
	DamageType Blood
   +MISSILE
   +CLIENTSIDEONLY
   +NOTELEPORT
   +NOBLOCKMAP
   +FORCEXYBILLBOARD
   +NODAMAGETHRUST
   +MOVEWITHSECTOR
   -DONTSPLASH
   +DOOMBOUNCE
   BounceFactor 0.01
    States
    {
     Spawn:
	 TNT1 A 0
	 TNT1 A 5
	 Stop
	 Death:
	 TNT1 A 0 A_SpawnItemEx("GroundStalagmites", random(-20,20), random(-20,20), 0, 0, 0, 0, 0, SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
	 XXX1 A 530
	 XXX1 AAAAAAAAAAAAAAAAAAAA 1 A_FadeOut(0.02)
  Stop
    }
}

ACTOR DetectCeilIce
{
 game Doom
 scale 5.0
 speed 0
 health 1
 radius 1
 height 2
 Gravity 0.0
 damage 0
 Renderstyle Add
 Alpha 0.9
	DamageType Blood
   +MISSILE
   +CLIENTSIDEONLY
   +NOTELEPORT
   +NOBLOCKMAP
   +FORCEXYBILLBOARD
   +NODAMAGETHRUST
   -DONTSPLASH
   +NOGRAVITY
    States
    {
     Spawn:
	 TNT1 A 0
	 TNT1 A 0 ThrustThingZ(0,35,0,1)
	 TNT1 A 1
	Stop
	 Death:
	 TNT1 A 0 A_SpawnItemEx("CeilingStalagmites", random(-20,20), random(-20,20), -1, 0, 0, 0, 0, SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
	 XXX1 A 530
	 XXX1 AAAAAAAAAAAAAAAAAAAA 1 A_FadeOut(0.02)
  Stop
    }
}

ACTOR IceStalagmite
{
  Mass 99999
  Health 300
  Radius 24
  Height 128
  DamageFactor "freeze", 0.5
  +SOLID
  +SHOOTABLE
  +NOBLOOD
  +DONTDRAIN
  States
  {
  Spawn:
  	TNT1 A 0 A_PlaySound("ICEBRK1")
	TNT1 A 0 A_SetScale(frandom(0.8, 1.2),frandom(0.8, 1.2))
  Stay:
	ICES A -1
    Stop
  Death.freeze:
   TNT1 A 1 A_SpawnItemEX ("IceStalagmite", 0, 0)
   Stop
   Death:
	TNT1 A 0 A_NoBlocking
	TNT1 A 0 A_PlaySound ("DSBOTTLE")
	TNT1 AAAAAAAAAAAAAAAAAAA 0 A_CustomMissile ("XIceChunk1", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAAAAAAAAAAAAAAAA 0 A_CustomMissile ("XIceChunk2", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile ("XIceChunk3", 48, 0, random (0, 360), 2, random (40, 120))
	ICES F 300
	ICES FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 1 A_FadeOut(0.01)
	Stop
  }
}

ACTOR IceStalagmite2: IceStalagmite
{
Scale 0.8
 Health 350
  States
  {
  Spawn:
   TNT1 A 0 A_PlaySound("ICEBRK1")
   TNT1 A 0 A_SetScale(frandom(0.6, 0.8),frandom(0.6, 0.8))
   ICES D -1 
   Stop
   Death.freeze:
   TNT1 A 1 A_SpawnItemEX ("IceStalagmite", 0, 0)
   Stop

  }
}

ACTOR IceStalagmite3: IceStalagmite
{
Scale 0.5
 Health 250
  States
  {
  Spawn:
   TNT1 A 0 A_PlaySound("ICEBRK1")
   TNT1 A 0 A_SetScale(frandom(0.4, 0.6),frandom(0.4, 0.6))
   ICES D -1
   Stop
   Death.freeze:
   TNT1 A 1 A_SpawnItemEX ("IceStalagmite2", 0, 0)
   Stop

  }
}

ACTOR IceStalagmite4: IceStalagmite
{
Scale 0.4
 Health 250
 States
  {
   Spawn:
   TNT1 A 0 A_PlaySound("ICEBRK1")
   TNT1 A 0 A_SetScale(frandom(0.3, 0.4),frandom(0.3, 0.4))
   ICES A -1 
   Stop
    Death.freeze:
    TNT1 A 1 A_SpawnItemEX ("IceStalagmite3", 0, 0)
	Stop
	}
}

ACTOR SmallIceStalagmite : IceStalagmite
{
Health 150
  Radius 16
  Height 32
  +SOLID
  States
  {
  Spawn:
	TNT1 A 0 A_SetScale(frandom(0.8, 1.2),frandom(0.8, 1.2))
    ICES B -1
    Stop
  Death.freeze:
    TNT1 A 1 A_SpawnItemEX ("IceStalagmite3", 0, 0)
	Stop
  Death:
	TNT1 A 0 A_NoBlocking
	TNT1 A 0 A_PlaySound ("DSBOTTLE")
	TNT1 AAAAAAAAAAA 0 A_CustomMissile ("XIceChunk1", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAAAAAAAA 0 A_CustomMissile ("XIceChunk2", 48, 0, random (0, 360), 2, random (0, 160))
	TNT1 AAAAAAAAAAAAAAAA 0 A_CustomMissile ("XIceChunk3", 48, 0, random (0, 360), 2, random (40, 120))
	ICES G 300
	ICES GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG 1 A_FadeOut(0.01)
	Stop
  }
}

ACTOR SmallIceStalagmite1 : SmallIceStalagmite
{
  Radius 16
  Height 32
  +SOLID
  States
  {
  Spawn:
	TNT1 A 0 A_SetScale(frandom(0.8, 1.2),frandom(0.8, 1.2))
    ICES C -1
    Stop
   Death.freeze:
    TNT1 A 1 A_SpawnItemEX ("IceStalagmite4", 0, 0)
	Stop
  }
}


ACTOR SmallIceStalagmite2 : SmallIceStalagmite
{
	Scale 1.2
  Radius 16
  Height 32
  +SOLID
  States
  {
  Spawn:
	TNT1 A 0 A_PlaySound("ICEBRK1")
	TNT1 A 0 A_SetScale(frandom(0.8, 1.2),frandom(0.8, 1.2))
    ICES E -1
    Stop
   Death.freeze:
    TNT1 A 1 A_SpawnItemEX ("IceStalagmite2", 0, 0)
	Stop
  }
}



ACTOR FrostShard //: Projectile
{
	Radius 5
	Height 5
	Speed 25
	Damage (random(1,10)*random(1,8) )
	damagetype "Freeze"
    Decal IceScorch2
	Projectile
	-THRUGHOST
	+RANDOMIZE
	+FORCEXYBILLBOARD
	+BLOODSPLATTER
	Renderstyle normal
	Alpha 0.90
	Scale 0.7
	SeeSound  "hail"
	deathsound "coldhit"
	//DeathSound "GWANDHIT"  
	States
	{
	Spawn:
	 ICPR ABC 2 Bright A_SpawnItemEx("FreezeCloud", 0, 0, 2)
	 Loop
	Death:
		//TNT1 A 0 A_Jump(192,"Death2")
		TNT1 A 0 A_SpawnItemEx ("DetectFloorIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilIce",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION,0)
	Death2:
	TNT1 A 0 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	SPHW ABCDE 1 BRIGHT //A_SetScale(scalex+(0.1),scaley+(0.1))
	SPHW F 1 A_SpawnItemEx ("FreezeCloudSpawner",0,0,5,0,0,0,0,SXF_NOCHECKPOSITION,0)
    TNT1 A 0 
	Stop
 
	}
}


					ACTOR FreezeCloudSpawner
					{
					+NOGRAVITY
					Height 0
					Radius 0
					
					States
					{
					Spawn:
					TNT1 A 0 A_JumpIfInventory("FreezeSpawnerCheck",6,"cloudend")
					TNT1 AAAA 2 A_SpawnItemEx("FreezeCloud",	frandom(-50,50),frandom(-50,50),frandom(0,40),		0,0,0)
					TNT1 A 0 A_GiveInventory("FreezeSpawnerCheck",1)
					Loop
					
					cloudend:
					TNT1 A 0
					Stop
					}
					}
					
					ACTOR FreezeCloudSpawnerShort
					{
					+NOGRAVITY
					Height 0
					Radius 0
					
					States
					{
					Spawn:
					TNT1 A 0 A_JumpIfInventory("FreezeSpawnerCheck",3,"cloudend")
					TNT1 AAAA 2 A_SpawnItemEx("FreezeCloud",	frandom(-50,50),frandom(-50,50),frandom(0,40),		0,0,0)
					TNT1 A 0 A_GiveInventory("FreezeSpawnerCheck",1)
					Loop
					
					cloudend:
					TNT1 A 0
					Stop
					}
					}
					
					

					ACTOR FreezeCloud  
					{
					+BLOODLESSIMPACT
					+FORCERADIUSDMG
					+DONTBLAST
					+FOILINVUL
					+NODAMAGETHRUST
					+DOOMBOUNCE 
					BounceType Grenade
					damagetype "Freeze" 
					damage 0
					gravity 0.005
					Translation "0:255=%[0.0,0.0,0.0]:[0.5,0.8,1.0]"
					Alpha 0.50
					Height 16
					Projectile
					Radius 1
					RenderStyle Shaded
					StencilColor "A0 FF FF"
					Scale 1
					Speed 2
					
					SeeSound "none"
					DeathSound "none"
					AttackSound "none"
					
						States
						{
						Spawn:
						WPXS A 0 
						WPXS A 0 A_Jump(230,3,7,11,15,19,23,27)
						WPXS AB 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS CD 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS EF 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS GH 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS IJ 2 A_FadeOut(0.03)
						WPXS KL 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS MN 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS OP 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS QR 2 A_FadeOut(0.03) 
						TNT1 A 0 A_Explode(1,16,0)
						WPXS ST 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS UV 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS WX 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXS YZ 2 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						WPXZ ABC 3 A_FadeOut(0.03)
						TNT1 A 0 A_Explode(1,16,0)
						Stop
						}
					
					}
					

					ACTOR FreezeSpawnerCheck : Inventory
					{
					Inventory.Amount 1
					Inventory.MaxAmount 100
					}



ACTOR Icebolt	//damaging icebolt
{
	Speed 10
	Radius 8
	Height 10
	Damage (random(2, 4))
	Projectile
	DamageType "Freeze"
	+PAINLESS
	+NOTAUTOAIMED
	+NODAMAGETHRUST
	Scale .5
	+RIPPER
	RenderStyle Add
	Alpha .1
	//SeeSound "IceGuyAttack"
	//DeathSound "IceGuyMissileExplode"
	States
	{
	Spawn:
		TNT1 A 0
		SHXW A 8 Bright A_SetTranslucent (0.1,0)
		SHXW B 8 Bright 
		SHXW C 8 Bright 
		SHXW D 8 Bright 
		SHXW E 8 Bright 
	Death:
		TNT1 A 0
		Stop
	}
}

ACTOR IceDagger : Icebolt	//IceDagger is spawned in Powerup State
{
	Damage (Random(8, 14))
	Speed 40
	Scale .5
	States
	{
	Spawn:
		TNT1 A 0
		ICPR A 1 Bright A_SetTranslucent (0.7,0)
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
	Death:
		ICPR DEFGH 2 Bright
		Stop
	}
}

ACTOR IceDagger1 : Icebolt	//Nondamaging IceDagger
{
	Speed 40
	Damage 0
	Scale .5
	States
	{
	Spawn:
		TNT1 A 0
		ICPR A 1 Bright A_SetTranslucent (0.7,0)
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
		ICPR A 1 Bright 
		ICPR B 1 Bright 
		ICPR C 1 Bright 
	Death:
		ICPR DEFGH 2 Bright
		Stop
	}
}

ACTOR Icebolt1	//nondamaging icebolt
{
	Speed 10
	Radius 8
	Height 10
	Projectile
	DamageType "Freeze"
	+PAINLESS
	+NOTAUTOAIMED
	+NODAMAGETHRUST
	Scale .5
	+THRUACTORS
	RenderStyle Add
	Alpha .1
	Translation "146:163=155:163"
	//SeeSound "IceGuyAttack"
	//DeathSound "IceGuyMissileExplode"
	States
	{
	Spawn:
		TNT1 A 0
		SHXW A 5 Bright	A_SetTranslucent (0.1,0)
		SHXW B 5 Bright 
		SHXW C 5 Bright
		SHXW D 5 Bright
		SHXW E 5 Bright
	Death:
		TNT1 A 0
		Stop
	}
}
